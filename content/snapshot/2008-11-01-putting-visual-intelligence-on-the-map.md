--- 
layout: post
title: Putting Visual Intelligence on the Map
date: 2008-11-01
published: true
meta: {}

tags: 
- work
type: post
categories: 
- Publications
- work
status: publish
---


thincVIew™: Putting Visual Intelligence on the Map Stephen G. Eick, Colin Alworth, Alex Decherd, Jesse Fugitt, Brian Horst, Andrzej Wolosewicz, Andrew Eick  Abstract—The focus of “Business Intelligence” is to enable corporations to analyze business data and gain insights that result in better business performance. One type of data that is underutilized by corporations is that involving locations. It is estimated that 80% of all data maintained by corporations has a location component, either directly involving longitude and latitude or indirectly by geo-encoding information such as addresses. To analyze geospatial business data, we have developed a thin client Web 2.0 AJAX platform called thincVIew™. Using thincVIew it is possible to develop rich mashup analytical sites. Although thincVIew is superficially similar to Google Maps and Microsoft’s Live Maps, the difference is that thincVIew’s API is designed for analysis and correlation rather than providing directions and serving up ads. In this paper we describe thincVIew and illustrate its use in a retail case study analyzing customers and store locations and shelf-level inventory and sales performance.  Index Terms—visual intelligence, geospatial analysis, mashups, Web 2.0, thinc client, GeoRSS, KML, Retail Analysis, Planogram [![clip_image001](http://www.andyeick.com/_blogMedia/PuttingVisualIntelligenceontheMap_12DCF/clip_image001_thumb.gif)](http://www.andyeick.com/_blogMedia/PuttingVisualIntelligenceontheMap_12DCF/clip_image001.gif) ### Introduction

 Our focus is on developing mashup sites for analyzing time-stamped, geo-encoded business data. This type of data is quite common and includes, for example, streams of news articles where the events in the articles are geo-located, the sequence of observed positions of a delivery vehicle as recorded by an onboard GPS, the positions of emergency personnel with active RFID badges in a hospital, customer purchases through time geo-encoded by customer address, and even item sales encoded aisle, shelf, and position within a retail store. Although it is possible to display this information using Google’s or Microsoft’s web-based mapping applications, these platforms do not permit rich analysis. The problem is that these web mapping applications are intended to support searching, to provide directions, and to serve up local ads. Both Google’s and Microsoft’s sites are advertising supported. Thus the APIs for these applications are optimized to serve up relevant ads. Using these platforms it is not possible to correlate geospatial information by time, by event type, by trend, etc. to discover important analytical relationships. Furthermore, traditional GIS systems are not designed for web-based analysis of time-oriented geospatial business intelligence data. These applications are often overwhelming complex, run on high-end desktop workstations, and are optimized to analyze geospatial layers. What is needed for business users are lightweight web-based tools that enable business information to be encoded and analyzed on both traditional geospatial maps and non traditional maps such as a floor plan layout. To address this need we have developed a Web 2.0 AJAX web mapping application called thincVIew™ aimed at the business intelligence market. Our technology shows geospatial information on a lightweight map, on a timeline, and in linked analysis charts. Presenting the information in multiple views enables analysts to correlate the dimensions and discover relationships that are hidden when the data is displayed in a single perspective. As a result they are able to perform richer and deeper analysis. This enables users to find patterns that are hidden in existing presentations. Although “linked view” visualization systems are well known, we believe ours is unique in that it is totally browser-based. In addition to our maps, we have developed a set of thin client visualization components, e.g. timeline, time wheel, node and link graphs, and standard business charts that work with our web application to provide a rich analysis environment. What is innovative about our components is that our web application is nearly as responsive and dynamic as the incumbent thick desktop applications. Further, ad-hoc and “what-if” scenarios can be explored by the analysts using our technology. With our web application analysts are able to combine data sources to create a mashup web site and then on the fly instantiate linked analysis charts. Then using sweep selects, highlighting, or filtering, analysts may interact with any of the charts to explore different dimensions of the data. In this way, they are able to discern patterns hidden in the data, giving them different insights into the problem. [![clip_image002](http://www.andyeick.com/_blogMedia/PuttingVisualIntelligenceontheMap_12DCF/clip_image002_thumb.gif)](http://www.andyeick.com/_blogMedia/PuttingVisualIntelligenceontheMap_12DCF/clip_image002.gif)[![clip_image003](http://www.andyeick.com/_blogMedia/PuttingVisualIntelligenceontheMap_12DCF/clip_image003_thumb.gif)](http://www.andyeick.com/_blogMedia/PuttingVisualIntelligenceontheMap_12DCF/clip_image003.gif)[![clip_image005](http://www.andyeick.com/_blogMedia/PuttingVisualIntelligenceontheMap_12DCF/clip_image005_thumb.jpg)](http://www.andyeick.com/_blogMedia/PuttingVisualIntelligenceontheMap_12DCF/clip_image005.jpg) <><><> Figure 1. thincVIew geospatial web application. Our web application implements and extends many of the ideas embodied in traditional mashups. It can ingest live or static data from several different sources and present it for rich analysis. Furthermore, by building on web technology, we can use ideas from the social networking sites. Analysts may edit and annotate the information in our web application and thereby create shared work products. The edits and annotations propagate automatically to other browsers on the site. In the remainder of this paper we describe our technology and web application in detail. ### thincVIew Analytical Web Application

 thincVIew includes a light weight JavaScript map, interactive timelines, and linked analysis components. In contrast to existing thin client mapping applications, thincVIew is an analytic application that provides a rich interactive environment for analyzing time-based geospatial event data. As shown in  Figure 1, thincVIew ingests RSS and GeoRSS streams and creates an interactive mashup. Each GeoRSS item is displayed on the map and in the timeline. RSS items without a geospatial element are only displayed in the timeline. The environment provides linking and several correlation tools to help analysts gain insights from the information. By combining the visual components of a map on a single web page an analyst creates an integrated analytical mashup. This approach to analysis is sometimes called Visual Discovery (Eick, Visual Discovery and Analysis, 2000). The advantage of multiple components is that each presents the mashup events using a different visual metaphor which might be more appropriate to the dataset.  #### Washington DC Metro System with Crime Data

 Figure 1 shows the Washington DC Metro System with the locations of street crimes. The street crimes are both time and location-stamped to when and where the crime occurred and appear both on the map and in the timeline. The map imagery is provided from an OGC Web Mapping Server (WMS). WMS is a standard interface for clients to request rasterized image and map tiles. The figure shows when the crimes occurred, where they were, and how they correlate to metro stops and the metro line. The thincVIew map and timelines are interactive. The user may grab the map or timeline with the mouse and drag it around. As this occurs, the map and timeline pan and zoom smoothly. The way this works is as the map is panned the JavaScript asynchronously requests new image tiles. When the user zooms in, the map animates between zoom levels using five discrete steps. These trips make the interface feel smooth to the users. This style of user interface is sometimes called a Direct Manipulation (Shneiderman, 1981).
 
 #### Ingesting GeoRSS Streams

 GeoRSS is a flexible way to ingest geospatial event data. In  Figure 1 the metro system routes, subway stops, and street crimes are each pulled from separate GeoRSS feeds. The feed for the metro lines consists of a static sequence of line segments with color codes for the different subway lines. Similarly the feed for the metro stop is also a static list of geo-positions represented as items in the GeoRSS feed. However, the street crime feed is a list of items each of which represents a crime with a location to specify where the crime occurred. To specify the location within the GeoRSS specification there is a namespace extension  node where arbitrary shapes may be specified using GML. For example, Figure 2 shows the GeoRSS item describing the Orange Line. The physical location of the of the Line is specified using a  as a sequence of latitudes and longitudes. Within the GeoRSS specification there is no capability to define drawing styles, e.g. colors and line thicknesses, for the metro routes. To address that need we extended GeoRSS using a namespace extension to add styling properties and certain shapes that we needed for our application. The shapes we added are ellipses, sectors, and slices of a circle. Although these shapes could be represented in GeoRSS using a GML generic polygon, it is rather cumbersome. To avoid any namespace clashes, we put all our extensions into the thincml namespace. For example, the specification  represents a sector of a circle or a pie wedge if the inside radius is zero. [![clip_image007](http://www.andyeick.com/_blogMedia/PuttingVisualIntelligenceontheMap_12DCF/clip_image007_thumb.jpg)](http://www.andyeick.com/_blogMedia/PuttingVisualIntelligenceontheMap_12DCF/clip_image007.jpg)<>[Figure ]()2. GeoRSS item representing the Orange Line. The thincml properties set the default drawing style. The thincVIew web application has the capability to ingest an arbitrary number of GeoRSS streams. See  Figure 3 (left). A stream may represent static information such as the locations of the Washington DC metro routes or dynamic information such as recent earthquake locations. For dynamic feeds thincVIew monitors each data stream and periodically polls it to access the latest information.   [![clip_image009](http://www.andyeick.com/_blogMedia/PuttingVisualIntelligenceontheMap_12DCF/clip_image009_thumb.jpg)](http://www.andyeick.com/_blogMedia/PuttingVisualIntelligenceontheMap_12DCF/clip_image009.jpg) [![clip_image011](http://www.andyeick.com/_blogMedia/PuttingVisualIntelligenceontheMap_12DCF/clip_image011_thumb.jpg)](http://www.andyeick.com/_blogMedia/PuttingVisualIntelligenceontheMap_12DCF/clip_image011.jpg)<><> Figure 3. Left: ingesting GeoRSS feeds as layers. Right: Analysts may override the default styling of the items embedded in the feed. #### thincVIew Interactive Timeline

 As shown in Figure 4, the thincVIew timeline is a light weight JavaScript web component for visualizing and interacting with time stamped data. The timeline includes a number of innovative features including: · Positions GeoRSS items that appear on the map on the timeline · Supports interactive panning and zooming · Provides synchronized detail timeline and overview timelines · Provides both watch mode where new events are automatically positioned and analysis mode where the display does not automatically update · Pans to most recent events in watch mode · Provides multiple time scales including hour, day, week, and month · Links to other visualizations such as the map using tooltips and selection · Provides rich API to program against · Includes built in toolbar · Increase visual scalability using an over plotting indicator (Eick & Karr, Visual Scalability, 2002) · Uses a best fit algorithms to position labels to avoid over plotting  The timeline visualization itself can be thought of as a series of rectangular tiles that each represent one unit of time and are placed horizontally to fill up a specified number of pixels on the web page. The unit of time represented depends on the scale of the timeline, which can be set to Year, Month, Day, Hour, Minute, or Second. [![clip_image013](http://www.andyeick.com/_blogMedia/PuttingVisualIntelligenceontheMap_12DCF/clip_image013_thumb.jpg)](http://www.andyeick.com/_blogMedia/PuttingVisualIntelligenceontheMap_12DCF/clip_image013.jpg) <>[Figure ]()4. Dynamic timeline displays RSS items. The timeline is linked to the map and other visual widgets and automatically pans when new items become available. thinvView timelines are interactive. As the user drags a timeline to the left or right using the mouse, new tiles are created and destroyed to give them the impression they are “panning” through time. This style of interaction is intuitive and easy to understand for users. In addition, simple buttons on the toolbar allow the user to zoom the timeline in or out, change the current timeline scale, pan to the most recent event, and reset the timeline scales. <>Figure 5 shows synchronized overview and detail thincVIew timelines. The overview timeline is set to Month scale and the detailed timeline is also set to Month scale. Each tile is labelled with its starting date and end date. Small vertical dashes are placed intelligently on the tile to indicate familiar time intervals and subintervals. For instance, day tiles would show each hour of the day as the smaller subinterval marks and the larger tick marks are used to divide the day into quarters. The tiles are automatically generated and labelled using configurable settings for background color and date format. The advantage of using two (or more) timelines is the fact they can be synchronized together. As the user manipulates one of the timelines, the other timeline scrolls accordingly. The blue lens in the center of the bottom timeline represents the entire time period displayed in the top timeline. This capability is desirable when attempting to display a summary level and detailed view of the same data. [![clip_image015](http://www.andyeick.com/_blogMedia/PuttingVisualIntelligenceontheMap_12DCF/clip_image015_thumb.jpg)](http://www.andyeick.com/_blogMedia/PuttingVisualIntelligenceontheMap_12DCF/clip_image015.jpg) [Figure ]()5. [Overview and detail timelines are synchronized to show multiple timescales.]() The rendering and interaction code on the thincVIew timeline is sometimes tricky. For rendering, the simplest approach is to plot objects corresponding to the data items on the timeline canvas. This approach could support basic interactive operations like tooltips, selecting and highlighting individual items or toggling an item’s visibility. However, implementing more advanced features such as hiding a group of items becomes computationally expensive in JavaScript. A second disadvantage of this approach is that it does not extend gracefully to display data from several RSS feeds. To overcome these problems, our implementation renders events from distinct RSS feeds separate transparent overlays on top of the raw timeline canvas. Each overlay is independently populated using the appropriate feed and styling properties. The advantage of this approach is that it is easy to add or remove a feed from the timeline or to configure properties of a feed, such as toggling its visibility, because the feed corresponds to a single overlay on the timeline which can easily be manipulated by setting DOM properties. #### Selection and Linking between the Timeline and Map

 [Sometimes a user wants to know when a closely related set of geospatial events occurred or where a set of temporally related events occurred. To help answer these questions, data items on the thincVIew map and timeline are linked to enable analysts to spot temporal and spatial relationships. Data items are linked in three ways. First, when the user holds the mouse over a data point on the timeline, the corresponding data point on the map is highlighted](). [Second, as is also shown in Figure 6, the user is able to sweep select groups of items. In this mode, the user sweeps out a region and thereby selects a set of items. Instantly, these items are highlighted on both the timeline and map displays. In Figure 6, the user is in the process of selecting a group of items on the timeline, which will also tell “where” these events occurred by watching the map display change as the linked items are selected. Sweep selecting on the map tells the user “when” the events occurred by observing the changes in the timeline. In the example the sequence of selected crimes that occurred over a several hour period all took place along the red line.]() More importantly, however, this operation causes the selected data items on the thincVIew map and timeline instantly to be highlighted as shown by the white outlines, and thereby helps the user visualize the “where” and “when” about the object’s events. Selection linking unifies the data across the visualizations and allows the analysts to construct a mental model of the events in both time and space. Third, the user also is able to change the glyphs and icons on the display. In this scenario, showing crime patterns, the crimes are displayed as simple color-coded circles with color indicating the crime type. The user could, for example, go into the properties of the data feed, and change the styling so that “robbery” crimes display as yellow triangles, and “violent crimes” to appear as purple squares. In this way, the user is able to stratify the visualization, searching for latent patterns. [![clip_image017](http://www.andyeick.com/_blogMedia/PuttingVisualIntelligenceontheMap_12DCF/clip_image017_thumb.jpg)](http://www.andyeick.com/_blogMedia/PuttingVisualIntelligenceontheMap_12DCF/clip_image017.jpg) [Figure ]()6. [Sweep selecting a time range highlights the locations of these items on the map.]() #### Minimizing Clutter for Real-time Feeds with Fadeout

 In monitoring mode the thincVIew constantly polls for the new events and renders these events on the map and timeline. Eventually the map will become cluttered with too many items and too much information. For situational awareness applications, old information is often not relevant to the current state and is distracting. To help minimize visual clutter thincVIew has several options involving event fadeout. These include: · Polling frequency which determines the frequency that the RSS provider is accessed to request new items · Fade Out period which cause items on the map and timeline to gradually fade and disappear to avoid cluttering the display with stale information · Pan to latest item causes either the map, timeline or both to pan to any new events as they arrive [![clip_image019](http://www.andyeick.com/_blogMedia/PuttingVisualIntelligenceontheMap_12DCF/clip_image019_thumb.jpg)](http://www.andyeick.com/_blogMedia/PuttingVisualIntelligenceontheMap_12DCF/clip_image019.jpg) [Figure ]()7. Options for live data feeds to set the polling rates and item fade out period. #### Ad Hoc Visual Analysis with Linked Charts

 Viewing data on a thincVIew map and timeline is helpful, but is limited in that it is only possible to spot certain types of patterns and outliers in the data. What is missing is a capability to correlate spatial and non spatial dimensions. To overcome this limitation, thincVIew lets the analyst create linked sets of visual components. Each visual component shows the data items using its own visual metaphor. The items in each visual metaphor are linked so that tooltips and selections propagate among the visual metaphors. <>[Using thincVIew a user performs ad hoc analysis by dynamically creating linked visualizations. In the example, as shown in Figure 8 and Figure 9, the user instantiates analysis components dynamically. These analysis components are resizable and dragable, and can even be minimized into the data tray at the bottom. Being live windows, as new data points are ingested into the system, the visual components will re-render themselves as needed. ]() With this powerful tool, the user is able to construct a mental model for the dataset, and do fine grained analysis of portions of the data as they expand and peer into the data. Since the tools are dynamic, the user is able to filter the data, and then construct graphs from the browser. For example, in our sample dataset an analyst may use the bar chart to filter the crimes data by selecting the “Robberies” and then create a time wheel to see when the crimes were reported, to discover if there is a pattern in the time dimension. The time wheel is a 24 hour clock with the day of week shown as concentric circles starting with Sunday. By displaying the crimes on the map, the analyst is able to see if there is a geographic pattern as well. Since the displays are linked, the user is able to sweep select regions, and see them highlight on the other visualizations. With these linked components, the analysts are able to discern whether a robbery is a single crime of chance, or part of a larger pattern indicating more organization. The analyst is able to quickly stratify the data and look for patterns. While the filtering engine is not the industrial strength query analysis tool that today’s database engines provide, the lightweight and ready access to the data enable the user to arrive at conclusions quickly to take action. [![clip_image021](http://www.andyeick.com/_blogMedia/PuttingVisualIntelligenceontheMap_12DCF/clip_image021_thumb.jpg)](http://www.andyeick.com/_blogMedia/PuttingVisualIntelligenceontheMap_12DCF/clip_image021.jpg) <>[Figure ]()8. Ad hoc analysis using linked visual metaphors running in a browser. [![clip_image023](http://www.andyeick.com/_blogMedia/PuttingVisualIntelligenceontheMap_12DCF/clip_image023_thumb.jpg)](http://www.andyeick.com/_blogMedia/PuttingVisualIntelligenceontheMap_12DCF/clip_image023.jpg) <>[Figure ]()9. Selections and tooltips propagate among the linked visual components, map, and timeline. Selection and linking helps users identify patterns in the data which are difficult to see without these charts. For example, the bar chart shows that the number of thefts is about 2.5 times greater than the number of criminal damage complaints which is approximately 50% larger than the number robberies. Selecting the crimes on the time wheel which occurred late at night and correlating these items with their locations on the map shows that most of these crimes occurred along the red line. Noticing these events in the time line shows that that occurred on a sequence of three days. Furthermore, there appear to be two distinct patterns of events on the time wheel. These are a sequence of crimes in the early evening and another sequence in the late evening and early morning. There is one exception. One criminal damage incident occurred in the early morning as indicated by the single green circle. ### Case Study: Multi-level Analysis of Retail Purchasing Patterns

 In recent years, more and more retailers are offering customer loyalty programs. These programs have many different variations but they serve two basic roles. The first is to help keep current customers coming back by offering incentives or programs that reward loyalty to the retailer. The second is to provide valuable market research data for the retailer on customer demographics and buying habits. However, as may be obviously apparent, the resulting dataset is enormous with significantly more variables than any person could ever analyze. The thincVIew application provides a set of visualizations that enable the user to interact and interrogate their data quickly and efficiently through a web browser. #### Store and Customer Location Analysis

 In our example, a hypothetical retailer has two stores within the Washington D.C. metro area and a handful of customers who participate regularly in the loyalty program. The customers have been grouped into three unique segments: “brand aspirationals”, “value-price shoppers”, and “price-sensitive affluents.” Instead of writing and processing database queries in a desktop application, thincVIew enables the user to identify an anomaly in the shopping habits of two customer segments, as shown in Figure 10. The analysis problem is to understand the shopping patterns of the different customer segments. There are two stores locations in the image indicated by red circles. Each customer transaction is shown on the timeline and the customer’s home address has been geo-encoded and positioned on the map. The images in Figure 10 show geospatial and temporal shopping patterns of the customer segments. The left image shows that the “brand aspirationals” prefer to shop at the northern location whereas the “price-sensitive affluents” segment prefers the southern location.  [![clip_image025](http://www.andyeick.com/_blogMedia/PuttingVisualIntelligenceontheMap_12DCF/clip_image025_thumb.jpg)](http://www.andyeick.com/_blogMedia/PuttingVisualIntelligenceontheMap_12DCF/clip_image025.jpg) [Figure ]()10. Locations of customers color coded by customer segment. The two images show that the “brand aspirationals” customer segment shop at the northern location whereas the “price sensitive affluents” segment shops at the southern location. Additionally, beyond seeing the result of the geographical analysis indicating customer preference for a store by customer type and not location, the linked functionality of the visualizations enables the user to also review what specific customers are buying and when they are shopping. Individual transactions are shown in the timeline color-coded by the customer segment. Improved data analysis can help drive better store placement, leading to improved sales per square foot, fewer markdowns, and higher returns. Using existing data from point of sale and merchandising systems, thincVIew provides a visual capability for understanding customer buying patterns. Users can quickly see buying by location, by customer segment, by geography, by time of day, and can fuse in other business data to make more informed business decision. thincVIew’s ability to combine business data such as customer loyalty information with customer demographics provides an integrated geospatial view of customer behaviour. With this type of information, retailers can perform site selection for new stores, identify growth opportunities, and identify opportunities for consolidation. Furthermore, retailers can identify buying patterns within or among key customer segments which could drive more targeted promotions, better merchandising, improved product mix, or even modified store hours for greater sales per square foot. For example, Figure 11 shows an analyst correlating purchases, customer location, customer segment with product category.  [![clip_image027](http://www.andyeick.com/_blogMedia/PuttingVisualIntelligenceontheMap_12DCF/clip_image027_thumb.jpg)](http://www.andyeick.com/_blogMedia/PuttingVisualIntelligenceontheMap_12DCF/clip_image027.jpg)[![clip_image028](http://www.andyeick.com/_blogMedia/PuttingVisualIntelligenceontheMap_12DCF/clip_image028_thumb.gif)](http://www.andyeick.com/_blogMedia/PuttingVisualIntelligenceontheMap_12DCF/clip_image028.gif)[![clip_image029](http://www.andyeick.com/_blogMedia/PuttingVisualIntelligenceontheMap_12DCF/clip_image029_thumb.gif)](http://www.andyeick.com/_blogMedia/PuttingVisualIntelligenceontheMap_12DCF/clip_image029.gif) [Figure ]()11. Correlating customer purchases with customer segments. #### Floor Plan, Aisle and Shelf Performance

 While analyzing customer data to improve store performance is a specific application, the flexibility of thincVIew enables a user to perform many different types of analysis. Starting again at the same display of customer and store locations, the user can zoom from a geospatial map down to a floor plan (Figure 12) for an individual store and even down to a shelf view (Figure 13). These second two applications are interesting because they involve non traditional maps. In Figure 12, for example, the aisles are color-coded to show sales performance. [![clip_image031](http://www.andyeick.com/_blogMedia/PuttingVisualIntelligenceontheMap_12DCF/clip_image031_thumb.jpg)](http://www.andyeick.com/_blogMedia/PuttingVisualIntelligenceontheMap_12DCF/clip_image031.jpg) [Figure ]()12. Sales performance by aisle correlated with product and item category. #### Shelf Performance using Planograms Analysis

 While the planogram is a key tool for space planning and product layout, this visually rich tool is often not used for measurement but replaced by simple bar graphs and pie charts. As shown in Figure 13, thincVIew enables retailers to dynamically link actual product performance data to each planogram, whether it’s store specific or down to a shelf level. By integrating with perpetual inventory systems, POS data, RFID or scanner data, etc., thincVIew provides a visually-driven measurement tools for retail analysis. [![clip_image033](http://www.andyeick.com/_blogMedia/PuttingVisualIntelligenceontheMap_12DCF/clip_image033_thumb.jpg)](http://www.andyeick.com/_blogMedia/PuttingVisualIntelligenceontheMap_12DCF/clip_image033.jpg) [Figure ]()13. Shelf-level performance correlated with inventory level and product positions. Because thincVIew is accessible via a web browser, retailers can allow key suppliers access to this data as well. They can quickly gauge compliance with programs by product type, by location, by geography, etc. Both retailer and supplier can collaborate on key performance metrics and view the results in real-time in a visually compelling tool that uses the same diagrams and visuals as the planning process. Working together, retailers and suppliers can close the loop and measure in the same manner which they plan.  ### System Implementation

 The thincVIew is an AJAX thin client web application. It contains no Java Applets and the client is written entirely in JavaScript and HTML. Building a cross-platform enterprise AJAX application is extremely difficult. There are many subtle issues involving security, timing, JavaScript, proxies, etc. that make the programming challenging. Our approach toward overcoming these issues involves breaking the problem up into layers and creating a JavaScript class library that we call thinc™. #### Implementation of Visual Metaphors using thinc™ JavaScript library

 The thincVIew map, timeline, time wheel, bar chart, and other visual components are implemented using a set of JavaScript classes built using our thinc JavaScript library. Using thinc components an application developer can create advanced, lightweight browser-based visualizations and mashups. The overall architecture consists of data components, visualization components, and framework/utility components. From a data ingestion perspective, there are several classes that allow the framework to pull in RSS and GeoRSS data feeds.  By default, thincVIew uses an XmlHttpRequest wrapper classes to asynchronously retrieve XML data from the server. This is how RSS and GeoRSS events are pulled asynchronously from the server by the web clients. The advantage of this approach is that XML data is quite standard and well understood. The disadvantage is that parsing XML data on a JavaScript client is somewhat cumbersome and slow. Recently, however, it has become popular in mashup applications to use the HTML  tags as a transport mechanism for pulling events from a server to a JavaScript client. Once transported, the data can be quickly consumed by the client, since the transformation from GeoRSS to native JavaScript data is no longer needed. We recently implemented support for JSON (JavaScript Object Notation) items so that once the data arrives on the client, the data items are parsed directly into an item collection. #### Browser Graphics using SVG and Silverlight 1.0

 Our thinc JavaScript framework includes various utility components to make creating visualizations easier. It uses an abstract rendering library to separate vector drawing functions inside the visualizations from the specific rendering API. It currently supports both SVG (W3C) and Silverlight 1.0 (Microsoft) drawing APIs. These APIs are currently the most standardized vector drawing languages available in modern web browsers. By supporting different underlying renderers in our framework, our visualizations can run in a variety of web browsers depending on which vector languages they support. #### Linking between Visual Components using RSS Items

 The basic idea in the thinc JavaScript framework is that data is represented using an ItemCollection class which is modelled after GeoRSS. By default, each data item has all of the attributes from the GeoRSS feed. thincVIew visual components display data taken from ItemCollections. If two components are displaying the same ItemCollection, they are automatically linked via tooltips, selection, and highlighting. Item collections may be created and updated programmatically, via JSON, or by monitoring RSS publishers. Once a data item collection is loaded, it can be passed to one of the many visualization classes to be rendered. #### Movable Lightweight Visual Metaphors

 The lightweight visual components shown in Figure 8 and Figure 9 that appear to be small movable windows are implemented as HTML divs on the page. When the user manipulates these “windows” our underlying JavaScript is actually manipulating and resizing the div so that appears to be a real window. These are in fact implemented completely in JavaScript using DOM programming. Our approach is similar to Yahoo! User Interface Library. (Yahoo! Corporation) These visualizations can be created and removed by the user after the application has loaded. The window can also be minimized to regain space in the main window. Even in this minimized state, the visualization can relay the information it contains to the user, as the minimized versions retain the linked highlighting ability, such that the user can select items in another visualization and observe the results in these “iconified” charts. [![clip_image035](http://www.andyeick.com/_blogMedia/PuttingVisualIntelligenceontheMap_12DCF/clip_image035_thumb.jpg)](http://www.andyeick.com/_blogMedia/PuttingVisualIntelligenceontheMap_12DCF/clip_image035.jpg) [Figure ]()14. Charts can be easily created from any data source. Users can create a movable visualization from any data source in the application, and, with the exception of the map and the timeline, any visualization supported by the thinc™ library can be made into one of these windowed charts, as shown in Figure 14. Once created, as seen in Figure 15, the user can modify properties of the chart on the fly, interchanging data fields used for the different axes. Changes made to these fields update immediately, letting the user decide if the changes made are sufficient. [![clip_image037](http://www.andyeick.com/_blogMedia/PuttingVisualIntelligenceontheMap_12DCF/clip_image037_thumb.jpg)](http://www.andyeick.com/_blogMedia/PuttingVisualIntelligenceontheMap_12DCF/clip_image037.jpg) [Figure ]()15. Once created, a movable visualization component can be easily modified to show other information. When the minimization button is clicked in an operating system, the current window is removed from the main working space of the screen, and displayed in another format, usually in such a way as to convey that the information is still available, and to send messages to the user when the data changes. Given the limited resources available in a JavaScript environment, our implementation accomplishes this by removing the “window” from view and resizing the chart to a size that, while too small to allow the user to select or highlight the data therein, still permits the user to see when sections are highlighted or selected by their actions in other visualizations as in Figure 16.  [![clip_image039](http://www.andyeick.com/_blogMedia/PuttingVisualIntelligenceontheMap_12DCF/clip_image039_thumb.gif)](http://www.andyeick.com/_blogMedia/PuttingVisualIntelligenceontheMap_12DCF/clip_image039.gif) [Figure ]()16. While minimized, the linked components still convey useful information By placing aninvisible div directly over the chart, we are able to continue to use all of the functionality inherent to the given chart, while at the same time limiting the actions that a user can have on it. Instead, a click anywhere on the chart will result in the chart returning to its normal size and position on the screen, allowing the user to continue to make full use of it.  Loss of granularity clearly occurs during this minimization process, as most of the visualizations were clearly not intended to be displayed at this size. Nevertheless, in instances where the user wishes to have a large number of charts being displayed at a given time, this ability demonstrates the connections between the given data.  #### Using Proxies to Overcome Cross-site Scripting Limitations and Connect to Different Data Formats

 thincVIew makes extensive use of proxies to overcome JavaScript cross-site scripting limitations. The application must proxy, for example, each RSS feed url since the website cannot access these urls directly. In addition, the proxy architecture allows for a layer of abstraction between the remote data source and the GeoRSS feed objects in the application. It is possible to ingest feeds that are not in GeoRSS format by simply coding a new proxy that is able to parse the desired format. Through a configuration property, the feed can be routed through the correct proxy so that GeoRSS data is returned to the application, even if the remote data is in another format like KML, GPX, etc. #### Rasterizing to Overcome Client Scalability Limitations

 Certain feature data like roads or boundaries are better pulled into the application as raster imagery rather than as vector data because of the data’s complexity and lack of mouse interaction needed for the specific data. Some data feeds might also contain thousands or points or polygons which overwhelm the JavaScript processing of the web browser. To support these situations, thincVIew exposes an option that lets the user pull in a feed as “rasterized” map tiles instead of as raw GeoRSS feature data. This option leverages server code that effectively converts GeoRSS data into .png image tiles and sends the image back to the application. However, the rasterized data is not tooltipable or linkable. To partially overcome this problem, the code optionally requests the last one to two hundred items as GeoRSS which are displayed on top of the rasterized information. #### Adding Read and Write Capability to a Feed Using REST

 In most cases, a feed is simply a read-only list of published items. However, certain scenarios lend themselves particularly well for the need to not only consume the list of items in the feed, but also create new items, edit existing items, and delete existing items in the data feed. To solve this problem, we have architected a REST solution in thincVIew similar to Google’s GDATA (Google) specification that leverages HTTP messages to send create, retrieve, update, and delete requests back to the source of the data feed. Letting users make changes to a GeoRSS feed, and displaying those changes to all other users viewing the feed, enables geospatial collaboration in a simple web browser without the need to download any heavyweight software package. Marking areas of interest, annotating boundary areas, drawing geo-fenced alert zones, and more are all possible by simply enabling read and write support for a GeoRSS feed. ### Summary and Discussion

 We have developed an enterprise AJAX web application for analyzing time-stamped geospatial mashup data. The new idea in our web application is to provide an analytical environment that enables users to display time-stamped geospatial event data on a JavaScript map and in linked visualization components. Our framework provides an environment for correlating among the visual components so that analysts may perform multi-dimensional spatial analysis. Our components present mashup data spatially on a map, temporally on a timeline and cyclically on a time wheel. The components are linked so that interactive operations, e.g. selection, tooltips, highlighting, automatically propagate to other components on the page. The components are particularly rich and include many features for understanding time-oriented event data. Mashups are widely used for understanding geospatial data. What is new here is our analytical environment for mashup data. Previous approaches toward mashups focused on presenting mashup data spatially. We have extended traditional presentations by adding a timeline and other visual analysis metaphors and enriched it by adding linking and correlation capability among the visual metaphors.  By cleverly using AJAX technology, we have incorporated ideas from real-time monitoring and situational awareness right into our framework and into our components. The value of this is that attaching our web application to a live data stream is the same operation as analyzing a fixed data source. Live and static data are handled by a unified model.  Our software is built around light-weight web protocols. By incorporating web technology, we have included many of the most significant ideas from the web including open standards, real-time collaboration, and flexible but simple data models. In our implementation we focus on ingesting RSS and GeoRSS data streams. RSS has become the standard way that streaming information is published on the web. By embracing this format we fit naturally into existing web infrastructures. We use REST and GDATA to access and publish information and thus fit in the Google’s Web App model. Each of our visual components is live, dynamic and interactive. Our visual components are building blocks that enable web authors to publish time-oriented geospatial content. Our visualizations are live, meaning they automatically ingest new information as it is published by the information providers. New events are placed automatically on our maps and in our other visual components within a second or two after they are published. We have added special features such as event “fade out” to support real-time monitoring tasks and situational awareness. Although linked view visualization components are not new, our approach toward them is completely new. We have implemented a linked view visualization system completely in a browser using JavaScript built around ideas from RSS. Often JavaScript web applications suffer from performance problems. Our JavaScript library overcomes this limitation for many visualization tasks. What is rather remarkable is how well it works. The interactive performance of our components is often faster than equivalent desktop software. References 1. Eick, S. G. (2000). Visual Discovery and Analysis. 6 (1), 44-58. 2. Eick, S. G., & Karr, A. F. (2002). Visual Scalability. Journal of Computational & Graphical Statistics , 11 (1). 3. GeoRSS: Geographically Encoded Objects for RSS Feeds. (n.d.). Retrieved 11 5, 2007, from http://georss.org/ 4. Google. (n.d.). Retrieved 11 5, 2007, from http://maps.google.com 5. Google. (n.d.). Google Data APIs. Retrieved 11 12, 2007, from http://code.google.com/apis/gdata/ 6. Google. (n.d.). Keyhole Markup Language. Retrieved 11 5, 2007, from http://en.wikipedia.org/wiki/Keyhole_Markup_Language 7. GPX: the GPS Exchange Format. (n.d.). Retrieved 11 5, 2007, from http://www.topografix.com/gpx.asp 8. Harvard. (n.d.). Retrieved from http://cyber.law.harvard.edu/rss/rss.html 9. Microsoft. (n.d.). Retrieved from http://maps.live.com 10. Microsoft. (n.d.). Silverlight. Retrieved 11 5, 2007, from http://silverlight.net/ 11. Shneiderman, B. (1981). Direct manipulation: A step beyond programming languages. ACM Digital Library . 12. W3C. (n.d.). Scalable Vector Graphics (SVG). Retrieved 11 5, 2007, from http://www.w3.org/Graphics/SVG/ 13. Wikipedia. (n.d.). Retrieved from http://en.wikipedia.org/wiki/Geography_Markup_Language 14. Wikipedia. (n.d.). Mashup (web application hybrid). Retrieved from http://en.wikipedia.org/wiki/Mashup_(web_application_hybrid) 15. Winslow, J., & Cattini, M. (n.d.). Leveraging the Power of Location Intelligence to Enhance Business Intelligence. Retrieved from http://resource.mapinfo.com/static/files/document/1114029791874/bi_wp.pdf. 16. Yahoo! Corporation. (n.d.). The Yahoo! User Interface Library. Retrieved 11 1, 2007, from http://developer.yahoo.com/yui/

